(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,n){},55:function(e,t,n){e.exports=n(90)},90:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(27),i=n.n(r),l=n(15),s=n(19),c=n(2),m=n(3),u=n(6),p=n(4),d=n(5),h=n(14),g=n.n(h),f=n(29),b=n(18),v=n(11),y=n(12);function E(){var e=Object(v.a)(["\n    display: block;\n    background: #131929;\n    height: 50px;\n    padding-top: 5px;\n    \n    & > p {\n        color: white;\n    }\n    \n    & > input:hover {\n        cursor: pointer;\n    }\n    \n    & > label {\n        margin-left: 4px;\n        font-size: 0.85em;\n    }\n"]);return E=function(){return e},e}var w=y.a.div(E()),k=0,j=function(e){return{type:"INIT",id:k++,userObj:e}},C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={user:{}},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(w,null,o.a.createElement("p",null,this.state.user.display_name)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user!==t.user?{user:e.user}:null}}]),t}(a.Component),O=Object(f.b)((function(e){return e}),(function(e){return Object(b.a)({initUser:j},e)}))(C),P=n(51),_=n(38),S=n.n(_),x=function e(t){var n=this;Object(c.a)(this,e),this.login=function(e,t){return n.fetch("/log-in",{method:"POST",body:JSON.stringify({username:e,password:t})}).then((function(e){return n.setToken(e.token),Promise.resolve(e)}))},this.loggedIn=function(){var e=n.getToken();return!!e&&!n.isTokenExpired(e)},this.isTokenExpired=function(e){try{return S()(e).exp<Date.now()/1e3}catch(t){return console.log("expired check failed! Line 42: AuthService.js"),!1}},this.setToken=function(e){localStorage.setItem("id_token",e)},this.getToken=function(){return localStorage.getItem("id_token")},this.logout=function(){localStorage.removeItem("id_token")},this.getConfirm=function(){var e=S()(n.getToken());return console.log("Recieved answer!"),e},this.fetch=function(e,t){var a={Accept:"application/json","Content-Type":"application/json"};return n.loggedIn()&&(a.Authorization="Bearer "+n.getToken()),fetch(e,Object(P.a)({headers:a},t)).then(n._checkStatus).then((function(e){return e.json()}))},this._checkStatus=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},this.domain=t||"http://localhost:3000"};var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case"LOGIN":return t.user;case"UPDATE_DISPLAY_NAME":return n.display_name=t.text,n;default:return e}},A=Object(b.b)({user:N}),I=Object(b.c)(A),D=function(e){var t=new x;return function(n){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(o)))).state={confirm:null,loaded:!1},t}return Object(d.a)(a,n),Object(m.a)(a,[{key:"componentDidMount",value:function(){if(t.loggedIn())try{var e=t.getConfirm();console.log("confirmation is:",e),this.setState({confirm:e,loaded:!0})}catch(n){console.log(n),t.logout(),this.props.history.replace("/login")}else this.props.history.replace("/login")}},{key:"render",value:function(){return 1==this.state.loaded?this.state.confirm?(console.log("confirmed!"),o.a.createElement(e,{history:this.props.history,confirm:this.state.confirm})):(console.log("not confirmed!"),null):null}}]),a}(a.Component)}(function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).Auth=new x,n._handleLogout=function(){n.Auth.logout(),n.props.history.replace("/login")},n.initUser=function(){var e=localStorage.getItem("login_token")||window.login_token;e?(g.a.defaults.headers.common={Authorization:"Bearer "+e},console.log("[ App ] this.props.confirm:",this.props.confirm),console.log("[ App ] Fetch user data with _id: "+this.props.confirm._id),g.a.get("/api/user").then((function(e){if(e.data&&e.data.error)alert(e.data.error);else{var t=e.data;console.log("[ App ] userData:",t),I.dispatch({type:"LOGIN",user:t})}})).catch((function(e){console.log(e)}))):(console.log("[ App ] Error: No token found!"),this.props.history.replace("/login"))},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.initUser()}},{key:"render",value:function(){return o.a.createElement(f.a,{store:I},o.a.createElement(O,null),o.a.createElement("button",{onClick:this._handleLogout},"logout"))}}]),t}(a.Component)),F=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={data:[]},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"TEST"))}}]),t}(a.Component),L=n(13),T=n(24),B=n(22),R=n.n(B),U=n(25),W=n.n(U);n(34);function M(){var e=Object(v.a)(["\n    0% {\n        opacity: 0;\n    }\n    50% {\n        opacity: 0;\n    }\n    100% {\n        opacity: 1;\n    }\n"]);return M=function(){return e},e}function z(){var e=Object(v.a)(["\n  0% {\n     transform:scaleY(0);\n  }\n  100% {\n     transform:scaleY(1);\n  }\n"]);return z=function(){return e},e}var H=Object(y.b)(z()),J=Object(y.b)(M());function Y(){var e=Object(v.a)(["\n    text-decoration: underline;\n    &:hover {\n        cursor: pointer;\n    }\n"]);return Y=function(){return e},e}function G(){var e=Object(v.a)(["\n    font-size: 0.85em;\n    opacity: 0;\n    display: inline-block;\n    line-height: 1.3em;\n    margin: 10px 0;\n    animation: "," 0.4s ease-in-out 1 forwards;\n"]);return G=function(){return e},e}function q(){var e=Object(v.a)(["\n    padding: 0 15px;\n    border-radius: 4px;\n    margin: 0 0 15px 0;\n    transform-origin: top;\n    animation: "," 0.4s ease-in-out 1 forwards;\n    border: 1px solid ",";\n    background: ",";\n    color: ",";\n"]);return q=function(){return e},e}var Q=y.a.div(q(),H,(function(e){return e.theme.mainBorder}),(function(e){return e.theme.mainBackground}),(function(e){return e.theme.mainColor})),$=y.a.h1(G(),J),K=y.a.span(Y());Q.defaultProps={theme:{mainBorder:"#F4485B",mainBackground:"rgba(244,72,91,0.1)",mainColor:"#ED3448"}};var V=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e={mainBorder:"#F4485B",mainBackground:"rgba(244,72,91,0.1)",mainColor:"#ED3448"};return"yellow"===this.props.color?(e.mainBorder="#DFBA0A",e.mainBackground="rgba(223,186,10,0.1)",e.mainColor="#A88F1A"):"green"===this.props.color&&(e.mainBorder="#14C76F",e.mainBackground="rgba(20,199,111,0.1)",e.mainColor="#11AF61"),o.a.createElement(Q,{theme:e},o.a.createElement($,null,this.props.message),this.props.resendConf&&this.props.resendConfirmationEmail&&o.a.createElement($,{onClick:this.props.resendConfirmationEmail},". ",o.a.createElement(K,null,"Resend Confirmation")))}}]),t}(a.Component),X=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).Auth=new x,n._handleChange=function(e){var t;n.setState((t={},Object(L.a)(t,e.target.name,e.target.value),Object(L.a)(t,"logoDeg",n.state.logoDeg+15),t))},n.handleFormSubmit=function(e){e.preventDefault(),n.setState({allowSubmit:!1}),n.displayPrompt("");var t={email:n.state.email,first_name:n.state.first_name,last_name:n.state.last_name,password:n.state.password};R.a.validate(t.email)?t.first_name?t.last_name?t.password?t.password.length<8?n.displayPrompt("Password must be at least 8 characters"):t.password!==n.state.confirm_password?n.displayPrompt("Passwords do not match"):n.ajaxPOST(t):n.displayPrompt("Password cannot be blank"):n.displayPrompt("Last name cannot be blank"):n.displayPrompt("First name cannot be blank"):n.displayPrompt("Email is not valid")},n.ajaxPOST=function(e){g.a.post("/signup",e).then((function(e){e.data&&e.data.error?n.displayPrompt(e.data.error,null,!0):n.displayPrompt("An account activation email has been sent to "+n.state.email+" - Please follow the instructions on the email to activate your account. Once your email is confirmed, you may log in using the credentials provided during signup","green",!0)}))},n.displayPrompt=function(e,t,a){n.setState({prompt:e,promptColor:t||"red",allowSubmit:!a})},n.state={email:"",first_name:"",last_name:"",password:"",confirm_password:"",prompt:"",promptColor:"red",logoDeg:0,allowSubmit:!0},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.Auth.loggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(T.Helmet,null,o.a.createElement("title",null,"Sign Up")),o.a.createElement("div",{className:"login-body-wrapper"},o.a.createElement(W.a,null),o.a.createElement("div",{className:"login-wrapper"},o.a.createElement("div",{className:"login-logo-wrapper"},o.a.createElement("p",null,o.a.createElement("span",null,"Sign Up"))),o.a.createElement("form",{className:"box-form"},o.a.createElement("input",{className:"form-item",placeholder:"Email",name:"email",type:"text",onChange:this._handleChange}),o.a.createElement("input",{className:"form-item",placeholder:"First name",name:"first_name",type:"text",onChange:this._handleChange}),o.a.createElement("input",{className:"form-item",placeholder:"Last name",name:"last_name",type:"text",onChange:this._handleChange}),o.a.createElement("input",{className:"form-item",placeholder:"Password (min. 8 characters)",name:"password",type:"password",onChange:this._handleChange}),o.a.createElement("input",{className:"form-item",placeholder:"Confirm Password",name:"confirm_password",type:"password",onChange:this._handleChange}),o.a.createElement("button",{className:"form-submit",disabled:!this.state.allowSubmit,onClick:this.handleFormSubmit},"Create Account")),this.state.prompt.length>0&&o.a.createElement(V,{message:this.state.prompt,color:this.state.promptColor}),o.a.createElement(l.b,{className:"link",to:"/login"},"Already have an account? ",o.a.createElement("span",{className:"link-signup"},"Log In")))))}}]),t}(a.Component);function Z(){var e=Object(v.a)(["\n    padding-top: 5px;\n    \n    & > input {\n        width: 18px;\n        height: 18px;\n        position: relative;\n        top: 2px;\n    }\n    \n    & > input:hover {\n        cursor: pointer;\n    }\n    \n    & > label {\n        margin-left: 4px;\n        font-size: 0.85em;\n    }\n"]);return Z=function(){return e},e}var ee=y.a.div(Z()),te=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).Auth=new x,n._handleChange=function(e){var t;n.setState((t={},Object(L.a)(t,e.target.name,e.target.value),Object(L.a)(t,"logoDeg",n.state.logoDeg+15),t))},n._handleCheckboxChange=function(){n.setState({stayLoggedIn:!n.state.stayLoggedIn})},n.handleFormSubmit=function(e){e.preventDefault(),n.displayPrompt(""),R.a.validate(n.state.email)?!n.state.password||n.state.password.length<8?n.displayPrompt("Password must be at least 8 characters"):n.Auth.login(n.state.email,n.state.password,n.state.stayLoggedIn).then((function(e){e.error?n.displayPrompt(e.error,e.color,e.resend_conf):n.props.history.replace("/")})).catch((function(e){alert(e)})):n.displayPrompt("Email is not valid")},n.displayPrompt=function(e,t,a){n.setState({prompt:e,promptColor:t||"red",resendConf:a||!1})},n.resendConfirmationEmail=function(){var e={email:n.state.email};e.email&&R.a.validate(e.email)&&g.a.post("/resend_account_activation_email",e).then((function(e){e.data&&e.data.error?n.displayPrompt(e.data.error):n.displayPrompt("Email sent. Please check your email","green",!1)}))},n.state={email:"",password:"",stayLoggedIn:!0,prompt:"",promptColor:"",resendConf:!1,logoDeg:0},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.Auth.loggedIn()&&this.props.history.replace("/")}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(T.Helmet,null,o.a.createElement("title",null,"Log In")),o.a.createElement("div",{className:"login-body-wrapper"},o.a.createElement(W.a,null),o.a.createElement("div",{className:"login-wrapper"},o.a.createElement("div",{className:"login-logo-wrapper"},o.a.createElement("p",null,o.a.createElement("span",null,"Log In"))),o.a.createElement("form",{className:"box-form"},o.a.createElement("input",{className:"form-item",placeholder:"Email",name:"email",type:"text",onChange:this._handleChange}),o.a.createElement("input",{className:"form-item",placeholder:"Password",name:"password",type:"password",onChange:this._handleChange}),o.a.createElement(ee,null,o.a.createElement("input",{name:"stayLoggedIn",type:"checkbox",checked:this.state.stayLoggedIn,onChange:this._handleCheckboxChange}),o.a.createElement("label",{className:"noselect",onClick:this._handleCheckboxChange},"Remember me")),o.a.createElement("button",{className:"form-submit",onClick:this.handleFormSubmit},"Log In")),this.state.prompt.length>0&&o.a.createElement(V,{message:this.state.prompt,color:this.state.promptColor,resendConf:this.state.resendConf,resendConfirmationEmail:this.resendConfirmationEmail}),o.a.createElement("div",null,o.a.createElement(l.b,{className:"link",to:"/signup"},"Don't have an account? ",o.a.createElement("span",null,"Sign Up"))),o.a.createElement("div",null,o.a.createElement(l.b,{className:"link",to:"/password"},o.a.createElement("span",null,"Forgot password?"))))))}}]),t}(a.Component),ne=n(28),ae=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).Auth=new x,n._handleChange=function(e){var t;n.setState((t={},Object(L.a)(t,e.target.name,e.target.value),Object(L.a)(t,"logoDeg",n.state.logoDeg+15),t))},n.handleFormSubmit=function(e){e.preventDefault(),n.setState({allowSubmit:!1}),n.displayPrompt("");var t={email:n.state.email};R.a.validate(t.email)?n.ajaxPOST(t):n.displayPrompt("Email is not valid")},n.ajaxPOST=function(e){g.a.post("/forgot_pw",e).then((function(e){e.data&&e.data.error?n.displayPrompt(e.data.error):n.displayPrompt("A password reset email has been sent to "+n.state.email+" - Please follow the instructions in the email to reset your password","green",!0)}))},n.displayPrompt=function(e,t,a){n.setState({prompt:e,promptColor:t||"red",allowSubmit:!a})},n.state={email:"",prompt:"",promptColor:"",logoDeg:0,allowSubmit:!0},n.displayPrompt=n.displayPrompt.bind(Object(ne.a)(n)),n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.Auth.loggedIn()&&this.props.history.replace("/")}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(T.Helmet,null,o.a.createElement("title",null,"Password Reset")),o.a.createElement("div",{className:"login-body-wrapper"},o.a.createElement(W.a,null),o.a.createElement("div",{className:"login-wrapper"},o.a.createElement("div",{className:"login-logo-wrapper"},o.a.createElement("p",null,o.a.createElement("span",null,"Password Reset"))),o.a.createElement("form",{className:"box-form"},o.a.createElement("input",{className:"form-item",placeholder:"Email",name:"email",type:"text",onChange:this._handleChange}),o.a.createElement("button",{className:"form-submit",disabled:!this.state.allowSubmit,onClick:this.handleFormSubmit},"Request Password Reset")),this.state.prompt.length>0&&o.a.createElement(V,{message:this.state.prompt,color:this.state.promptColor}),o.a.createElement(l.b,{className:"link",to:"/login"},"Already have an account? ",o.a.createElement("span",{className:"link-signup"},"Log In")),o.a.createElement(l.b,{className:"link",to:"/signup"},"Don't have an account? ",o.a.createElement("span",null,"Signup")))))}}]),t}(a.Component),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ie=o.a.createElement(l.a,null,o.a.createElement("div",null,o.a.createElement(s.a,{exact:!0,path:"/",component:D}),o.a.createElement(s.a,{exact:!0,path:"/about",component:F}),o.a.createElement(s.a,{exact:!0,path:"/signup",component:X}),o.a.createElement(s.a,{exact:!0,path:"/login",component:te}),o.a.createElement(s.a,{exact:!0,path:"/password",component:ae})));i.a.render(ie,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");oe?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):re(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):re(e)}))}}()}},[[55,1,2]]]);
//# sourceMappingURL=main.f0918489.chunk.js.map